<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=1024"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <title>SydJS - Modular, please.</title>

  <meta name="description"
    content="Easy steps to make your do-it-all node app into bunch of small and clean modules."/>
  <meta name="author" content="Nik Butenko"/>

  <link
    href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic"
    rel="stylesheet"/>

  <link href="css/impress-demo.css" rel="stylesheet"/>

  <link rel="shortcut icon" href="favicon.png"/>
  <link rel="apple-touch-icon" href="apple-touch-icon.png"/>

  <link rel="stylesheet" href="css/highlight/tomorrow-night-eighties.css">
</head>

<body class="impress-not-supported">


<div class="fallback-message">
  <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented
    with a simplified version of this presentation.</p>

  <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b>
    browser.</p>
</div>

<div id="impress" data-transition-duration="500">

<div id="title" class="title step" data-x="0" data-y="0" data-scale="1">
  <p class="try">Modular, please.</p>

  <p>Easy steps to make your do-it-all node app into bunch of small and clean modules.</p>

  <div class="footnote">
    <p>Sydney, 17th September 2014</p>

    <p>Nik Butenko</p>
  </div>
</div>

<div id="part1" class="title step" data-x="0" data-y="1000">
  <p class="try">Part 1</p>

  <p>Quick start NPM module from scratch</p>

</div>
<div id="npm_init" class="step slide" data-x="-2000" data-y="2000">
  <h2>Required minimum to make your own NPM module</h2>
  <!--@formatter:off-->
  <script type="text/plain" data-lang="bash">
mkdir sydjs2-module
cd sydjs2-modyle
npm init
# ...
name: (sydjs2-module) # ↵
version: (1.0.0) # ↵
description: SydJS Module # ↵
entry point: (index.js) # ↵
test command: # ↵
git repository: git@github.com:nkbt/sydjs2-module.git # ↵
keywords: sydjs, module # ↵
license: (ISC) MIT # ↵
About to write to C:\www\nkbt\sydjs2-module\package.json:
# ...
Is this ok? (yes) yes # ↵
  </script>
  <!--@formatter:on-->
</div>

<div id="package.json" class="step slide" data-x="-1000" data-y="2000">
  <h2>NPM creates initial package.json for us</h2>
  <!--@formatter:off-->
  <script type="text/plain" data-lang="json">
{
  "name": "sydjs2-module",
  "version": "1.0.0",
  "description": "SydJS Module",
  "main": "index.js",
  "repository": {
    "type": "git",
    "url": "git@github.com:nkbt/sydjs2-module.git"
  },
  "keywords": [
    "sydjs",
    "module"
  ],
  "author": "Nik Butenko <nik@butenko.me> (http://butenko.me/)",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/nkbt/sydjs2-module/issues"
  },
  "homepage": "https://github.com/nkbt/sydjs2-module"
}
  </script>
  <!--@formatter:on-->
</div>

<div id="private" class="step slide" data-x="0" data-y="2000">
  <h2>Add "private" to package.json</h2>
  <p>To avoid accidental publish to NPM registry</p>
  <br/>
  <!--@formatter:off-->
  <script type="text/plain" data-lang="json">
{
  "private":true,

  "name": "sydjs2-module",
  "version": "1.0.0",
  "description": "SydJS Module",
  "main": "index.js"

  /* ... */
}
  </script>
  <!--@formatter:on-->
</div>


<div id="module" class="step slide" data-x="1000" data-y="2000">
  <h2>Create <b>index.js</b></h2>
  <!--@formatter:off-->
  <p>YOu ca use any filename, but same as "main" property in your package.json</p>
  <br/>
  <script type="text/plain" data-lang="bash">
touch index.js
subl index.js
  </script>
  <br/>
  <p>And fill it with some code</p>
  <br/>
  <script type="text/plain" data-lang="javascript">
module.exports = function(name) {
    return ['Hello', name || 'unnamed!'].join(', '); 
}    
  </script>
  <!--@formatter:on-->
</div>


<div id="commit" class="step slide" data-x="2000" data-y="2000">
  <h2>Commit and push to GitHub</h2>
  <br/>
  <script type="text/plain" data-lang="bash">
git init
git add .
git commit -m "Init"
git remote add origin git@github.com:nkbt/sydjs2-module.git
git push -u origin master
  
  
  
  </script>
</div>


<div id="app.js" class="step slide" data-x="-500" data-y="3000">
  <h2>Use our new module in application</h2>
  <p>Create a new empty app</p>
  <!--@formatter:off-->
  <br/>
  <script type="text/plain" data-lang="bash">
cd ..
mkdir sydjs-app
cd sydjs-app
npm install nkbt/sydjs2-module --save
#> sydjs2-module@1.0.0 node_modules\sydjs2-module
touch app.js
subl app.js
  </script>
  <br/>
  <p>app.js</p>
  <br/>
  <script type="text/plain" data-lang="javascript">
var sydjsModule = require('sydjs2-module');
var greetings = sydjsModule(process.argv[2]);
console.log(greetings);
   </script>
  <!--@formatter:on-->
</div>


<div id="app-package" class="step slide" data-x="500" data-y="3000">
  <h2>Run!</h2>
  <!--@formatter:off-->
  <script type="text/plain" data-lang="bash">
node app SydJS
#> Hello, SydJS!

node app
#> Hello, unnamed!
   </script>
  <!--@formatter:on-->
</div>


<div id="part2" class="title step" data-x="0" data-y="4000">
  <p class="try">Part 2</p>
  <p>We want moar sugar</p>
  <div class="footnote">
    <p>... we have some</p>
  </div>
</div>


<div id="expected" class="step slide" data-x="-2000" data-y="5000">
  <h2>What is a <b>good</b> NPM module?</h2>
  <ol>
    <li>Options</li>
    <li>Custom Errors</li>
    <li>Tests</li>
    <li>More tests</li>
    <li>100% coverage!</li>
    <li>Documentation</li>
    <li>Build process</li>
  </ol>

</div>



<div id="mmkay_" class="step slide" data-x="-1000" data-y="5000">
  <h2>What do I think of these?</h2>
  <br/>
  <ol>
    <li>Options&nbsp;&nbsp;⇒&nbsp;&nbsp;<b>Too easy!</b></li>
    <li>Custom Errors&nbsp;&nbsp;⇒&nbsp;&nbsp;<b>I may not need them...</b></li>
    <li>Tests&nbsp;&nbsp;⇒&nbsp;&nbsp;<b>Sounds like fun, but where to begin?</b></li>
    <li>More tests&nbsp;&nbsp;⇒&nbsp;&nbsp;<b>Look above</b></li>
    <li>100% coverage!&nbsp;&nbsp;⇒&nbsp;&nbsp;<b>WAT?</b></li>
    <li>Documentation&nbsp;&nbsp;⇒&nbsp;&nbsp;<b>(╯°□°）╯︵ ┻━┻</b></li>
    <li>Build process&nbsp;&nbsp;⇒&nbsp;&nbsp;<b>Mmmmkay...</b></li>
  </ol>

</div>

<div id="good_news" class="title step" data-x="500" data-y="5000" data-rotate-x="-90" data-rotate-y="20"
  data-scale="2">
  <div style="text-align: center;">
    <img src="app-for-that.png" style="width: 60%;" alt=""/>
  </div>
</div>


<div id="init_v2" class="step slide" data-x="2000" data-y="5000" data-scale="1">
  <!--<br/>-->
  <!--<br/>-->
  <!--<p>Checkout <a href="https://github.com/nkbt/npm-template">https://github.com/nkbt/npm-template</a></>-->
  <h2>Init v.2</h2>
  <!--@formatter:off-->
  <script type="text/plain" data-lang="bash">
mkdir awesome
cd awesome
git init
git remote add template https://github.com/nkbt/npm-template.git
git pull template master
# replace 'npm-template' with 'awesome', delete unwanted
git commit -m "Init"
git remote add origin git@github.com:nkbt/awesome.git
git push -u origin master
   </script>
  <!--@formatter:on-->
  <br/>
  <p>...or just download source and pick what you like</p>
</div>


<div id="got_it" class="title step" data-x="0" data-y="6000">
  <p class="try center">And now we have</p>
</div>

<div id="config" class="step slide" data-x="-2000" data-y="7000" data-scale="1">
  <h2>Configurable module <i>[lib/awesome.js]</i></h2>
  <!--@formatter:off-->
  <script type="text/plain" data-lang="javascript">
var defaults = {
	name: 'Awesome'
};

function Awesome(options) {
  this.options = _.clone(defaults);
  if (!_.isEmpty(options)) {
    this.setOptions(options);
  }
}

// ...
module.exports = Awesome;
   </script>
  <!--@formatter:on-->
</div>


<div id="errors" class="step slide" data-x="-1000" data-y="7000" data-scale="1">
  <h2>Custom Errors <i>[lib/errors.js]</i></h2>
  <!--@formatter:off-->
  <script type="text/plain" data-lang="javascript">
var errors = require('./errors');
// errors.Error instanceof Error
// errors.OptionsRequiredError instanceof errors.Error

function Awesome(options) {  /* ... */ }
util.inherits(Awesome, EventEmitter);

Awesome.prototype.setOptions = function (options) {
  if (!_.isObject(options)) {
    return this.emit('error', new errors.OptionsRequiredError());
  }
  // ...
};

Awesome.errors = errors;

module.exports = exports = Awesome;
  </script>
  <!--@formatter:on-->
</div>


<div id="build" class="step slide" data-x="0" data-y="7000" data-scale="1">
  <h2>Build process <i>[Gruntfile.js]</i></h2>
  <p>+ npm scripts</p>
  <br/>
  <!--@formatter:off-->
  <script type="text/plain" data-lang="javascript">
$ npm run
Available scripts in the npm-template package:
  test
    grunt
  doc
    JS_COV=1 grunt cov && grunt doc

$ npm test
# Will do JSHint tests and Mocha tests

$ npm run doc
# Will build coverage report and auto-documentation
  </script>
  <!--@formatter:on-->
</div>

<div id="tests" class="step slide" data-x="1000" data-y="7000" data-scale="1">
  <h2>Tests <i>[test/lib.awesome.js]</i></h2>
  <!--@formatter:off-->
  <script type="text/plain" data-lang="javascript">
describe('Awesome', function () {

  it('should respond to [getOptions, setOptions] instance methods', function () {
    expect(Awesome).to.respondTo('getOptions', 'setOptions');
  });

  it('should have [getDefaults] static method', function () {
    expect(Awesome).itself.to.respondTo('getDefaults');
  });

  it('should have [errors] static property', function () {
    expect(Awesome).to.have.property('errors');
  });

  // ...
}
  </script>
  <!--@formatter:on-->
</div>

<div id="tests2" class="step slide" data-x="2000" data-y="7000" data-scale="1">
  <h2>Moar tests</h2>
  <!--@formatter:off-->
  <script type="text/plain" data-lang="bash">
> npm run test

# ...

Running "mochacli:test" (mochacli) task
1..7
ok 1 Awesome should respond to [getOptions, setOptions] instance methods
ok 2 Awesome should have [getDefaults] static method
ok 3 Awesome should have [errors] static property
ok 4 Awesome should have default options pre-set
ok 5 Awesome should have options.name set to "Test"
ok 6 Awesome should not set any unexpected options
ok 7 Awesome should emit OptionsRequiredError if no options passed
# tests 7
# pass 7
# fail 0

Done, without errors.
  </script>
  <!--@formatter:on-->
</div>

<div id="cov" class="step slide" data-x="-500" data-y="8000" data-scale="1">
  <h2>100% coverage <i>[doc/coverage.html]</i></h2>
  <p>You have it from the start. Just don't give up!</p>
  <br/>
  <!--@formatter:off-->
  <div style="text-align: center;">
    <img src="cov.png" style="width: 90%;" alt=""/>
  </div>
  <!--@formatter:on-->
</div>

<div id="doc" class="step slide" data-x="500" data-y="8000" data-scale="1">
  <h2>Auto-documentation based on tests</h2>
  <p>Not perfect but much better then nothing, especially with 100% code coverage and reasonably good messages <i>doc/index.html</i></p>
  <br/>
  <!--@formatter:on-->
  <div style="text-align: center;">
    <img src="doc.png" style="width: 90%;" alt=""/>
  </div>
</div>


<div id="thanks" class="title step" data-x="0" data-y="10000" data-rotate-x="90"
  data-rotate-y="90" data-scale="3">

  <h2>Thanks!</h2>

  <br/>
  <div style="text-align: center;">
    <img src="qr.png" style="width: 80%;" alt=""/>
  </div>

  <p>
    <a href="https://github.com/nkbt/sydjs2" target="_blank">
      https://github.com/<strong>nkbt</strong>/sydjs2
    </a>
  </p>
  <img src="nyantocat.gif" style="position: absolute; right: 0; bottom: 0; width: 100px; border-radius: 50px;" alt=""/>
</div>


<div id="overview" class="step" data-x="2200" data-y="3000" data-scale="10">
</div>

</div>

<ul id="nav">
</ul>

<script type="text/javascript" src="js/impress.js"></script>
<script type="text/javascript" src="js/highlight.pack.js"></script>

<script>

  (function () {

    var codes = {},
      timers = {};

    function typeText(id, $element, callback) {
      var TIMEOUT = 3,
        code;
      if (!!timers[id]) {
        clearTimeout(timers[id]);
        timers[id] = null;
      }
      if (!codes[id]) {
        codes[id] = $element.innerText.trim();
      }
      code = codes[id].split('');
      $element.innerHTML = '';
      $element.style.display = 'block';

      function typeChar() {
        if (code.length < 1) {
          return callback();
        }
        var char = code.shift();
        if (char === '\t') {
          char = '  ';
        }
        $element.innerHTML = [$element.innerHTML, char].join('');
        timers[id] = setTimeout(
          typeChar,
          (char === '\n') ?
          TIMEOUT * 10 + TIMEOUT * 40 * Math.random() :
          TIMEOUT + TIMEOUT * 4 * Math.random()
        );
      }

      return typeChar();
    }

    function processScript($script) {
      var $pre,
        $code;
      $pre = document.createElement('pre');
      $code = document.createElement('code');
      $code.classList.add('hljs');
      $code.classList.add($script.dataset.lang);
      $code.innerText = $script.innerText.trim();
      $pre.appendChild($code);

      $script.parentNode.replaceChild($pre, $script);

      return $code;
    }

    document.body.addEventListener("impress:stepenter", function (event) {
      return Array.prototype.slice.apply(event.target.querySelectorAll('script[data-lang]'))
        .map(processScript)
        .forEach(function ($code, index) {
          return typeText([event.target.id, index].join('-'), $code, function () {
            hljs.highlightBlock($code);
          });
        });
    }, false);

    Array.prototype.slice.apply(document.querySelectorAll('[id].step')).forEach(function ($element) {
      var $a = document.createElement('a'),
        $li = document.createElement('li'),
        $h = $element.querySelector('h2, h3');
      $li.appendChild($a);
      $a.title = $h && $h.innerHTML || $element.id;
      $a.href = ['#', $element.id].join('');
      $a.innerHTML = $element.id;
      return document.querySelector('#nav').appendChild($li);
    });

    impress().init();
  }());
</script>
</body>
</html>
